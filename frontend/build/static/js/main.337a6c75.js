/*! For license information please see main.337a6c75.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://acdff010-d864-450a-bf6b-b1ab18ec11c8.preview.emergentagent.com","/api"),At=(0,a.createContext)(),Ft=e=>{let{children:t}=e;const[n,r]=(0,a.useState)(!1),[l,o]=(0,a.useState)(localStorage.getItem("token"));(0,a.useEffect)((()=>{l&&(r(!0),Rt.defaults.headers.common.Authorization="Bearer ".concat(l))}),[l]);return(0,zt.jsx)(At.Provider,{value:{isAuthenticated:n,login:async(e,t)=>{try{const n=await Rt.post("".concat(Lt,"/auth/login"),{username:e,password:t}),{token:a}=n.data;return localStorage.setItem("token",a),o(a),r(!0),Rt.defaults.headers.common.Authorization="Bearer ".concat(a),{success:!0}}catch(l){var n,a;return{success:!1,error:(null===(n=l.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||"Login failed"}}},logout:()=>{localStorage.removeItem("token"),o(null),r(!1),delete Rt.defaults.headers.common.Authorization}},children:t})},Dt=()=>{const e=(0,a.useContext)(At);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Mt=e=>{let{isOpen:t,onClose:n}=e;const[r,l]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[s,u]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),{login:f}=Dt();return t?(0,zt.jsx)("div",{className:"modal-backdrop",children:(0,zt.jsxs)("div",{className:"modal-content login-modal",children:[(0,zt.jsx)("h2",{className:"modal-title",children:"Panel de Administraci\xf3n"}),s&&(0,zt.jsx)("div",{className:"error-message",children:s}),(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);const t=await f(r,o);d(!1),t.success?(n(),l(""),i(""),u("")):u(t.error)},className:"login-form",children:[(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Usuario"}),(0,zt.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),className:"form-input",required:!0,disabled:c})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Contrase\xf1a"}),(0,zt.jsx)("input",{type:"password",value:o,onChange:e=>i(e.target.value),className:"form-input",required:!0,disabled:c})]}),(0,zt.jsxs)("div",{className:"form-actions",children:[(0,zt.jsx)("button",{type:"submit",className:"btn-primary ".concat(c?"loading":""),disabled:c,children:c?"Accediendo...":"Acceder"}),(0,zt.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",disabled:c,children:"Cancelar"})]})]})]})}):null},Ut=e=>{let{imageBase64:t,onSave:n,onClose:r,itemId:l,collectionId:o}=e;const[i,s]=(0,a.useState)(t),[u,c]=(0,a.useState)(100),[d,f]=(0,a.useState)(100),[p,m]=(0,a.useState)(100),[h,g]=(0,a.useState)(!1);return(0,zt.jsx)("div",{className:"modal-backdrop",children:(0,zt.jsxs)("div",{className:"modal-content image-editor-modal",children:[(0,zt.jsx)("h2",{className:"modal-title",children:"Editor de Imagen"}),(0,zt.jsxs)("div",{className:"image-editor-content",children:[(0,zt.jsx)("div",{className:"image-preview-section",children:(0,zt.jsx)("img",{src:i,alt:"Preview",style:{filter:"brightness(".concat(u,"%) contrast(").concat(d,"%) saturate(").concat(p,"%)")},className:"image-preview-large"})}),(0,zt.jsxs)("div",{className:"controls-section",children:[(0,zt.jsxs)("div",{className:"control-group",children:[(0,zt.jsxs)("label",{className:"control-label",children:["Brillo: ",u,"%"]}),(0,zt.jsx)("input",{type:"range",min:"50",max:"150",value:u,onChange:e=>c(e.target.value),className:"range-slider"})]}),(0,zt.jsxs)("div",{className:"control-group",children:[(0,zt.jsxs)("label",{className:"control-label",children:["Contraste: ",d,"%"]}),(0,zt.jsx)("input",{type:"range",min:"50",max:"150",value:d,onChange:e=>f(e.target.value),className:"range-slider"})]}),(0,zt.jsxs)("div",{className:"control-group",children:[(0,zt.jsxs)("label",{className:"control-label",children:["Saturaci\xf3n: ",p,"%"]}),(0,zt.jsx)("input",{type:"range",min:"0",max:"200",value:p,onChange:e=>m(e.target.value),className:"range-slider"})]})]})]}),(0,zt.jsxs)("div",{className:"form-actions",children:[(0,zt.jsx)("button",{onClick:async()=>{g(!0);try{const e=document.createElement("canvas"),t=e.getContext("2d"),a=new Image;a.onload=async()=>{e.width=a.width,e.height=a.height,t.filter="brightness(".concat(u,"%) contrast(").concat(d,"%) saturate(").concat(p,"%)"),t.drawImage(a,0,0);const i=e.toDataURL("image/jpeg",.9);await Rt.post("".concat(Lt,"/save-edited-image"),{item_id:l,collection_id:o,image_base64:i}),n(i,{brightness:u,contrast:d,saturation:p}),alert("Imagen guardada exitosamente"),r()},a.src=i}catch(e){console.error("Error saving image:",e),alert("Error al guardar la imagen")}finally{g(!1)}},className:"btn-primary ".concat(h?"loading":""),disabled:h,children:h?"Guardando...":"Guardar Cambios"}),(0,zt.jsx)("button",{onClick:r,className:"btn-secondary",disabled:h,children:"Cancelar"})]})]})})},It=e=>{let{isOpen:t,onClose:n,siteConfig:r,onConfigUpdate:l,collections:o,onCollectionsUpdate:i,jewelryItems:s,onJewelryUpdate:u}=e;const[d,f]=(0,a.useState)("general"),[p,m]=(0,a.useState)({}),[h,g]=(0,a.useState)(null),[y,v]=(0,a.useState)(null),[b,w]=(0,a.useState)({name:"",description:"",image_base64:"",position:0}),[k,S]=(0,a.useState)({name:"",description:"",image_base64:"",collection_id:"",position:0}),[x,E]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(console.log("Effect ejecut\xe1ndose - siteConfig:",r,"isOpen:",t),t&&r&&Object.keys(r).length>0){console.log("Inicializando editConfig con:",r);const e=c({},r);m(e),console.log("EditConfig inicializado con:",e)}else!t||r&&0!==Object.keys(r).length||(console.log("SiteConfig vac\xedo, inicializando editConfig con valores por defecto"),m({site_name:"",artisan_name:"",artisan_story:"",artisan_contact:"",site_subtitle:"",hero_title:"",hero_description:"",collections_title:"",collections_subtitle:"",footer_title_1:"",footer_title_2:"",footer_title_3:"",footer_text_3:"",footer_copyright:"",social_facebook:"",social_instagram:"",social_tiktok:"",social_whatsapp:"",social_youtube:"",social_twitter:"",social_facebook_enabled:!1,social_instagram_enabled:!1,social_tiktok_enabled:!1,social_whatsapp_enabled:!1,social_youtube_enabled:!1,social_twitter_enabled:!1,color_scheme:"gold"}))}),[r,t]),(0,a.useEffect)((()=>{console.log("editConfig actualizado:",p),console.log("Claves en editConfig:",Object.keys(p))}),[p]);const N=(e,t)=>{const n=e.target.files[0];if(n){const e=new FileReader;e.onload=e=>{t(e.target.result)},e.readAsDataURL(n)}},_=async()=>{if(!x){E(!0);try{console.log("Guardando configuraci\xf3n:",p);const e=await Rt.put("".concat(Lt,"/config"),p);console.log("Respuesta del servidor:",e.data),await l(),alert("Configuraci\xf3n guardada exitosamente")}catch(r){var e,t,n;console.error("Error al guardar configuraci\xf3n:",r),console.error("Detalles del error:",null===(e=r.response)||void 0===e?void 0:e.data),alert("Error al guardar configuraci\xf3n: ".concat((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}finally{E(!1)}}};return t?(0,zt.jsx)("div",{className:"modal-backdrop",children:(0,zt.jsxs)("div",{className:"modal-content admin-panel",children:[(0,zt.jsxs)("div",{className:"admin-header",children:[(0,zt.jsx)("h2",{children:"Panel de Administraci\xf3n"}),(0,zt.jsx)("button",{onClick:n,className:"close-btn",children:"\xd7"})]}),(0,zt.jsxs)("div",{className:"admin-tabs",children:[(0,zt.jsx)("button",{className:"tab ".concat("general"===d?"active":""),onClick:()=>f("general"),children:"General"}),(0,zt.jsx)("button",{className:"tab ".concat("textos"===d?"active":""),onClick:()=>f("textos"),children:"Textos"}),(0,zt.jsx)("button",{className:"tab ".concat("redes"===d?"active":""),onClick:()=>f("redes"),children:"Redes Sociales"}),(0,zt.jsx)("button",{className:"tab ".concat("collections"===d?"active":""),onClick:()=>f("collections"),children:"Colecciones"}),(0,zt.jsx)("button",{className:"tab ".concat("jewelry"===d?"active":""),onClick:()=>f("jewelry"),children:"Joyas"})]}),(0,zt.jsxs)("div",{className:"admin-content",children:["general"===d&&(0,zt.jsxs)("div",{className:"config-panel",children:[(0,zt.jsx)("h3",{children:"Configuraci\xf3n General"}),(0,zt.jsxs)("div",{className:"form-grid",children:[(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Nombre del Sitio"}),(0,zt.jsx)("input",{type:"text",value:p.site_name||"",onChange:e=>m(c(c({},p),{},{site_name:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Nombre de la Artesana"}),(0,zt.jsx)("input",{type:"text",value:p.artisan_name||"",onChange:e=>m(c(c({},p),{},{artisan_name:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group full-width",children:[(0,zt.jsx)("label",{children:"Historia de la Artesana"}),(0,zt.jsx)("textarea",{value:p.artisan_story||"",onChange:e=>m(c(c({},p),{},{artisan_story:e.target.value})),className:"form-textarea",rows:"4"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Email de Contacto"}),(0,zt.jsx)("input",{type:"email",value:p.artisan_contact||"",onChange:e=>m(c(c({},p),{},{artisan_contact:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Tel\xe9fono"}),(0,zt.jsx)("input",{type:"text",value:p.artisan_phone||"",onChange:e=>m(c(c({},p),{},{artisan_phone:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group full-width",children:[(0,zt.jsx)("label",{children:"Direcci\xf3n"}),(0,zt.jsx)("input",{type:"text",value:p.artisan_address||"",onChange:e=>m(c(c({},p),{},{artisan_address:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Esquema de Color"}),(0,zt.jsxs)("select",{value:p.color_scheme||"gold",onChange:e=>m(c(c({},p),{},{color_scheme:e.target.value})),className:"form-select",children:[(0,zt.jsx)("option",{value:"gold",children:"Dorado"}),(0,zt.jsx)("option",{value:"silver",children:"Plateado"}),(0,zt.jsx)("option",{value:"rose",children:"Rosa"})]})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Logo"}),(0,zt.jsx)("input",{type:"file",accept:"image/*",onChange:e=>N(e,(e=>m(c(c({},p),{},{logo_base64:e})))),className:"form-input"}),p.logo_base64&&(0,zt.jsx)("img",{src:p.logo_base64,alt:"Logo preview",className:"image-preview"})]})]}),(0,zt.jsx)("button",{onClick:_,className:"btn-primary ".concat(x?"loading":""),disabled:x,children:x?"Guardando...":"Guardar Configuraci\xf3n General"})]}),"textos"===d&&(0,zt.jsxs)("div",{className:"config-panel",children:[(0,zt.jsx)("h3",{children:"Personalizaci\xf3n de Textos"}),(0,zt.jsxs)("div",{className:"form-grid",children:[(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Subt\xedtulo del Sitio"}),(0,zt.jsx)("input",{type:"text",value:p.site_subtitle||"",onChange:e=>m(c(c({},p),{},{site_subtitle:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"T\xedtulo del Hero"}),(0,zt.jsx)("input",{type:"text",value:p.hero_title||"",onChange:e=>m(c(c({},p),{},{hero_title:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group full-width",children:[(0,zt.jsx)("label",{children:"Descripci\xf3n del Hero"}),(0,zt.jsx)("textarea",{value:p.hero_description||"",onChange:e=>m(c(c({},p),{},{hero_description:e.target.value})),className:"form-textarea",rows:"3"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"T\xedtulo de Colecciones"}),(0,zt.jsx)("input",{type:"text",value:p.collections_title||"",onChange:e=>m(c(c({},p),{},{collections_title:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Subt\xedtulo de Colecciones"}),(0,zt.jsx)("input",{type:"text",value:p.collections_subtitle||"",onChange:e=>m(c(c({},p),{},{collections_subtitle:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"T\xedtulo Footer 1"}),(0,zt.jsx)("input",{type:"text",value:p.footer_title_1||"",onChange:e=>m(c(c({},p),{},{footer_title_1:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"T\xedtulo Footer 2"}),(0,zt.jsx)("input",{type:"text",value:p.footer_title_2||"",onChange:e=>m(c(c({},p),{},{footer_title_2:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"T\xedtulo Footer 3"}),(0,zt.jsx)("input",{type:"text",value:p.footer_title_3||"",onChange:e=>m(c(c({},p),{},{footer_title_3:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group full-width",children:[(0,zt.jsx)("label",{children:"Texto Footer 3"}),(0,zt.jsx)("textarea",{value:p.footer_text_3||"",onChange:e=>m(c(c({},p),{},{footer_text_3:e.target.value})),className:"form-textarea",rows:"2"})]}),(0,zt.jsxs)("div",{className:"form-group full-width",children:[(0,zt.jsx)("label",{children:"Texto Copyright"}),(0,zt.jsx)("input",{type:"text",value:p.footer_copyright||"",onChange:e=>m(c(c({},p),{},{footer_copyright:e.target.value})),className:"form-input"})]})]}),(0,zt.jsx)("button",{onClick:_,className:"btn-primary ".concat(x?"loading":""),disabled:x,children:x?"Guardando...":"Guardar Textos Personalizados"})]}),"redes"===d&&(0,zt.jsxs)("div",{className:"config-panel",children:[(0,zt.jsx)("h3",{children:"Redes Sociales"}),(0,zt.jsxs)("div",{className:"form-grid",children:[(0,zt.jsxs)("div",{className:"form-group social-group",children:[(0,zt.jsxs)("label",{className:"social-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:p.social_facebook_enabled||!1,onChange:e=>m(c(c({},p),{},{social_facebook_enabled:e.target.checked}))}),"Facebook"]}),(0,zt.jsx)("input",{type:"url",placeholder:"https://facebook.com/tupagina",value:p.social_facebook||"",onChange:e=>m(c(c({},p),{},{social_facebook:e.target.value})),className:"form-input",disabled:!p.social_facebook_enabled})]}),(0,zt.jsxs)("div",{className:"form-group social-group",children:[(0,zt.jsxs)("label",{className:"social-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:p.social_instagram_enabled||!1,onChange:e=>m(c(c({},p),{},{social_instagram_enabled:e.target.checked}))}),"Instagram"]}),(0,zt.jsx)("input",{type:"url",placeholder:"https://instagram.com/tuusuario",value:p.social_instagram||"",onChange:e=>m(c(c({},p),{},{social_instagram:e.target.value})),className:"form-input",disabled:!p.social_instagram_enabled})]}),(0,zt.jsxs)("div",{className:"form-group social-group",children:[(0,zt.jsxs)("label",{className:"social-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:p.social_tiktok_enabled||!1,onChange:e=>m(c(c({},p),{},{social_tiktok_enabled:e.target.checked}))}),"TikTok"]}),(0,zt.jsx)("input",{type:"url",placeholder:"https://tiktok.com/@tuusuario",value:p.social_tiktok||"",onChange:e=>m(c(c({},p),{},{social_tiktok:e.target.value})),className:"form-input",disabled:!p.social_tiktok_enabled})]}),(0,zt.jsxs)("div",{className:"form-group social-group",children:[(0,zt.jsxs)("label",{className:"social-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:p.social_whatsapp_enabled||!1,onChange:e=>m(c(c({},p),{},{social_whatsapp_enabled:e.target.checked}))}),"WhatsApp"]}),(0,zt.jsx)("input",{type:"tel",placeholder:"+34600000000",value:p.social_whatsapp||"",onChange:e=>m(c(c({},p),{},{social_whatsapp:e.target.value})),className:"form-input",disabled:!p.social_whatsapp_enabled})]}),(0,zt.jsxs)("div",{className:"form-group social-group",children:[(0,zt.jsxs)("label",{className:"social-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:p.social_youtube_enabled||!1,onChange:e=>m(c(c({},p),{},{social_youtube_enabled:e.target.checked}))}),"YouTube"]}),(0,zt.jsx)("input",{type:"url",placeholder:"https://youtube.com/c/tucanal",value:p.social_youtube||"",onChange:e=>m(c(c({},p),{},{social_youtube:e.target.value})),className:"form-input",disabled:!p.social_youtube_enabled})]}),(0,zt.jsxs)("div",{className:"form-group social-group",children:[(0,zt.jsxs)("label",{className:"social-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:p.social_twitter_enabled||!1,onChange:e=>m(c(c({},p),{},{social_twitter_enabled:e.target.checked}))}),"Twitter/X"]}),(0,zt.jsx)("input",{type:"url",placeholder:"https://twitter.com/tuusuario",value:p.social_twitter||"",onChange:e=>m(c(c({},p),{},{social_twitter:e.target.value})),className:"form-input",disabled:!p.social_twitter_enabled})]})]}),(0,zt.jsx)("button",{onClick:_,className:"btn-primary ".concat(x?"loading":""),disabled:x,children:x?"Guardando...":"Guardar Redes Sociales"})]}),"collections"===d&&(0,zt.jsxs)("div",{className:"collections-panel",children:[(0,zt.jsxs)("div",{className:"panel-header",children:[(0,zt.jsx)("h3",{children:"Gesti\xf3n de Colecciones"}),(0,zt.jsx)("button",{onClick:()=>g(c({},b)),className:"btn-primary",children:"Nueva Colecci\xf3n"})]}),(0,zt.jsx)("div",{className:"collections-grid",children:o.map((e=>(0,zt.jsxs)("div",{className:"collection-card-admin",children:[(0,zt.jsx)("img",{src:e.image_base64,alt:e.name,className:"collection-image-admin"}),(0,zt.jsxs)("div",{className:"collection-info",children:[(0,zt.jsx)("h4",{children:e.name}),(0,zt.jsx)("p",{children:e.description}),(0,zt.jsxs)("div",{className:"collection-actions",children:[(0,zt.jsx)("button",{onClick:()=>g(e),className:"btn-secondary",children:"Editar"}),(0,zt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar esta colecci\xf3n y todas sus joyas?"))try{console.log("Eliminando colecci\xf3n:",e),await Rt.delete("".concat(Lt,"/collections/").concat(e)),await i(),await u(),alert("Colecci\xf3n eliminada exitosamente")}catch(r){var t,n;console.error("Error al eliminar colecci\xf3n:",r),alert("Error al eliminar colecci\xf3n: ".concat((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}})(e.id),className:"btn-danger",children:"Eliminar"})]})]})]},e.id)))}),h&&(0,zt.jsx)("div",{className:"edit-modal",children:(0,zt.jsxs)("div",{className:"edit-content",children:[(0,zt.jsx)("h4",{children:h.id?"Editar Colecci\xf3n":"Nueva Colecci\xf3n"}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Nombre"}),(0,zt.jsx)("input",{type:"text",value:h.name||"",onChange:e=>g(c(c({},h),{},{name:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Descripci\xf3n"}),(0,zt.jsx)("textarea",{value:h.description||"",onChange:e=>g(c(c({},h),{},{description:e.target.value})),className:"form-textarea",rows:"3"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Imagen"}),(0,zt.jsx)("input",{type:"file",accept:"image/*",onChange:e=>N(e,(e=>g(c(c({},h),{},{image_base64:e})))),className:"form-input"}),h.image_base64&&(0,zt.jsx)("img",{src:h.image_base64,alt:"Preview",className:"image-preview"})]}),(0,zt.jsxs)("div",{className:"form-actions",children:[(0,zt.jsx)("button",{onClick:()=>(async e=>{if(!x){E(!0);try{if(console.log("Guardando colecci\xf3n:",e),e.id){const t=await Rt.put("".concat(Lt,"/collections/").concat(e.id),e);console.log("Colecci\xf3n actualizada:",t.data)}else{const t=await Rt.post("".concat(Lt,"/collections"),e);console.log("Colecci\xf3n creada:",t.data)}await i(),g(null),w({name:"",description:"",image_base64:"",position:0}),alert("Colecci\xf3n guardada exitosamente")}catch(r){var t,n;console.error("Error al guardar colecci\xf3n:",r),alert("Error al guardar colecci\xf3n: ".concat((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}finally{E(!1)}}})(h),className:"btn-primary",children:"Guardar"}),(0,zt.jsx)("button",{onClick:()=>g(null),className:"btn-secondary",children:"Cancelar"})]})]})})]}),"jewelry"===d&&(0,zt.jsxs)("div",{className:"jewelry-panel",children:[(0,zt.jsxs)("div",{className:"panel-header",children:[(0,zt.jsx)("h3",{children:"Gesti\xf3n de Joyas"}),(0,zt.jsx)("button",{onClick:()=>v(c({},k)),className:"btn-primary",children:"Nueva Joya"})]}),(0,zt.jsx)("div",{className:"jewelry-grid",children:s.map((e=>{var t;return(0,zt.jsxs)("div",{className:"jewelry-card-admin",children:[(0,zt.jsx)("img",{src:e.image_base64,alt:e.name,className:"jewelry-image-admin"}),(0,zt.jsxs)("div",{className:"jewelry-info",children:[(0,zt.jsx)("h4",{children:e.name}),(0,zt.jsx)("p",{children:e.description}),(0,zt.jsxs)("small",{children:["Colecci\xf3n: ",null===(t=o.find((t=>t.id===e.collection_id)))||void 0===t?void 0:t.name]}),(0,zt.jsxs)("div",{className:"jewelry-actions",children:[(0,zt.jsx)("button",{onClick:()=>v(e),className:"btn-secondary",children:"Editar"}),(0,zt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar esta joya?"))try{console.log("Eliminando joya:",e),await Rt.delete("".concat(Lt,"/jewelry-items/").concat(e)),await u(),alert("Joya eliminada exitosamente")}catch(r){var t,n;console.error("Error al eliminar joya:",r),alert("Error al eliminar joya: ".concat((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}})(e.id),className:"btn-danger",children:"Eliminar"})]})]})]},e.id)}))}),y&&(0,zt.jsx)("div",{className:"edit-modal",children:(0,zt.jsxs)("div",{className:"edit-content",children:[(0,zt.jsx)("h4",{children:y.id?"Editar Joya":"Nueva Joya"}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Nombre"}),(0,zt.jsx)("input",{type:"text",value:y.name||"",onChange:e=>v(c(c({},y),{},{name:e.target.value})),className:"form-input"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Descripci\xf3n"}),(0,zt.jsx)("textarea",{value:y.description||"",onChange:e=>v(c(c({},y),{},{description:e.target.value})),className:"form-textarea",rows:"3"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Colecci\xf3n"}),(0,zt.jsxs)("select",{value:y.collection_id||"",onChange:e=>v(c(c({},y),{},{collection_id:e.target.value})),className:"form-select",children:[(0,zt.jsx)("option",{value:"",children:"Seleccionar colecci\xf3n"}),o.map((e=>(0,zt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Imagen"}),(0,zt.jsx)("input",{type:"file",accept:"image/*",onChange:e=>N(e,(e=>v(c(c({},y),{},{image_base64:e})))),className:"form-input"}),y.image_base64&&(0,zt.jsx)("img",{src:y.image_base64,alt:"Preview",className:"image-preview"})]}),(0,zt.jsxs)("div",{className:"form-actions",children:[(0,zt.jsx)("button",{onClick:()=>(async e=>{if(!x){E(!0);try{if(console.log("Guardando joya:",e),e.id){const t=await Rt.put("".concat(Lt,"/jewelry-items/").concat(e.id),e);console.log("Joya actualizada:",t.data)}else{const t=await Rt.post("".concat(Lt,"/jewelry-items"),e);console.log("Joya creada:",t.data)}await u(),v(null),S({name:"",description:"",image_base64:"",collection_id:"",position:0}),alert("Joya guardada exitosamente")}catch(r){var t,n;console.error("Error al guardar joya:",r),alert("Error al guardar joya: ".concat((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}finally{E(!1)}}})(y),className:"btn-primary",children:"Guardar"}),(0,zt.jsx)("button",{onClick:()=>v(null),className:"btn-secondary",children:"Cancelar"})]})]})})]})]})]})}):null},Bt=e=>{let{children:t,direction:n="up",delay:r=0}=e;const[l,o]=(0,a.useState)(!1),i=(0,a.useRef)();return(0,a.useEffect)((()=>{const e=new IntersectionObserver((e=>{let[t]=e;t.isIntersecting&&setTimeout((()=>o(!0)),r)}),{threshold:.1});return i.current&&e.observe(i.current),()=>e.disconnect()}),[r]),(0,zt.jsx)("div",{ref:i,className:"scroll-reveal ".concat(l?"visible":""," reveal-").concat(n),style:{"--delay":"".concat(r,"ms")},children:t})},Ht=e=>{let{children:t,speed:n=.5,className:r=""}=e;const[l,o]=(0,a.useState)(0),i=(0,a.useRef)();return(0,a.useEffect)((()=>{const e=()=>{if(i.current){i.current.getBoundingClientRect();const e=window.pageYOffset;o(e*-n)}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[n]),(0,zt.jsx)("div",{ref:i,className:"parallax-section ".concat(r),style:{transform:"translateY(".concat(l,"px)")},children:t})},qt=e=>{let{config:t}=e;const n="\ud83d\udcd8",r="\ud83d\udcf7",a="\ud83c\udfb5",l="\ud83d\udcac",o="\ud83d\udcfa",i="\ud83d\udc26",s=(e,t)=>{"whatsapp"===e?window.open("https://wa.me/".concat(t.replace(/[^0-9]/g,"")),"_blank"):window.open(t,"_blank")};return(0,zt.jsxs)("div",{className:"social-links",children:[t.social_facebook_enabled&&t.social_facebook&&(0,zt.jsx)("button",{onClick:()=>s("facebook",t.social_facebook),className:"social-link facebook",title:"Facebook",children:n}),t.social_instagram_enabled&&t.social_instagram&&(0,zt.jsx)("button",{onClick:()=>s("instagram",t.social_instagram),className:"social-link instagram",title:"Instagram",children:r}),t.social_tiktok_enabled&&t.social_tiktok&&(0,zt.jsx)("button",{onClick:()=>s("tiktok",t.social_tiktok),className:"social-link tiktok",title:"TikTok",children:a}),t.social_whatsapp_enabled&&t.social_whatsapp&&(0,zt.jsx)("button",{onClick:()=>s("whatsapp",t.social_whatsapp),className:"social-link whatsapp",title:"WhatsApp",children:l}),t.social_youtube_enabled&&t.social_youtube&&(0,zt.jsx)("button",{onClick:()=>s("youtube",t.social_youtube),className:"social-link youtube",title:"YouTube",children:o}),t.social_twitter_enabled&&t.social_twitter&&(0,zt.jsx)("button",{onClick:()=>s("twitter",t.social_twitter),className:"social-link twitter",title:"Twitter",children:i})]})},Vt=()=>{const[e,t]=(0,a.useState)(null),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[i,s]=(0,a.useState)(null),[u,c]=(0,a.useState)(!1),[d,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[y,v]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(0),[x,E]=(0,a.useState)(!1),[N,_]=(0,a.useState)(0),[C,j]=(0,a.useState)("right"),{isAuthenticated:P,logout:T}=Dt(),O={gold:{primary:"from-amber-600 to-yellow-600",secondary:"from-amber-100 to-yellow-100",accent:"amber-600",text:"amber-900",bg:"amber-50"},silver:{primary:"from-gray-600 to-slate-600",secondary:"from-gray-100 to-slate-100",accent:"gray-600",text:"gray-900",bg:"gray-50"},rose:{primary:"from-rose-600 to-pink-600",secondary:"from-rose-100 to-pink-100",accent:"rose-600",text:"rose-900",bg:"rose-50"}}[(null===e||void 0===e?void 0:e.color_scheme)||"gold"];(0,a.useEffect)((()=>{const e=()=>{const e=window.scrollY;_(e),v(e>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),(0,a.useEffect)((()=>{let e;return x&&(e=setTimeout((()=>{w(!0),E(!1)}),3e4)),()=>clearTimeout(e)}),[x]),(0,a.useEffect)((()=>{let e;return b&&(e=setTimeout((()=>{w(!1),S(0),E(!1)}),1e4)),()=>clearTimeout(e)}),[b]),(0,a.useEffect)((()=>{R(),z(),L(),A()}),[]);const R=async()=>{try{console.log("Cargando configuraci\xf3n del sitio...");const e=await Rt.get("".concat(Lt,"/config"));console.log("Configuraci\xf3n cargada:",e.data),t(e.data)}catch(e){console.error("Error loading site config:",e)}},z=async()=>{try{const e=await Rt.get("".concat(Lt,"/collections"));r(e.data)}catch(e){console.error("Error loading collections:",e)}},L=async()=>{try{const e=await Rt.get("".concat(Lt,"/jewelry-items"));o(e.data)}catch(e){console.error("Error loading jewelry items:",e)}},A=async()=>{try{await Rt.post("".concat(Lt,"/init-demo-data"))}catch(e){console.error("Error initializing demo data:",e)}},F=()=>{const e=k+1;if(S(e),e>=5){E(!0),S(0);const e=Math.random()<.5?"left":"right";j(e),navigator.vibrate&&navigator.vibrate(200);const t=document.createElement("div");t.textContent="Acceso administrativo activado. Espera 30 segundos...",t.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: rgba(212, 175, 55, 0.9);\n        color: white;\n        padding: 12px 20px;\n        border-radius: 8px;\n        font-weight: 600;\n        z-index: 9999;\n        box-shadow: 0 4px 20px rgba(0,0,0,0.2);\n        animation: slideInRight 0.3s ease;\n      ",document.body.appendChild(t),setTimeout((()=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),3e3)}else{const t=5-e;console.log("".concat(t," clics restantes para activar admin"))}},D=function(e){g({base64:e,itemId:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,collectionId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}),m(!0)};return e?(0,zt.jsxs)("div",{className:"app-container ".concat(O.bg),children:[(0,zt.jsx)("header",{className:"main-header ".concat(y?"scrolled":""),children:(0,zt.jsxs)("div",{className:"header-content",children:[e.logo_base64&&(0,zt.jsx)("div",{className:"logo-container",children:(0,zt.jsx)("img",{src:e.logo_base64,alt:e.site_name,className:"logo",style:{transform:"scale(".concat(1-5e-4*N,")")}})}),(0,zt.jsxs)("div",{className:"site-title",children:[(0,zt.jsx)("h1",{className:"site-name",children:e.site_name}),(0,zt.jsx)("div",{className:"site-divider"})]})]})}),(0,zt.jsxs)("section",{className:"hero-section",children:[(0,zt.jsx)(Ht,{speed:.3,className:"hero-bg",children:(0,zt.jsx)("div",{className:"hero-overlay"})}),(0,zt.jsxs)("div",{className:"hero-content",children:[(0,zt.jsx)(Bt,{direction:"up",delay:300,children:(0,zt.jsx)("h1",{className:"hero-title",children:e.hero_title||e.artisan_name})}),(0,zt.jsx)(Bt,{direction:"up",delay:600,children:(0,zt.jsxs)("div",{className:"hero-subtitle",children:[(0,zt.jsx)("span",{className:"subtitle-line"}),(0,zt.jsx)("span",{className:"subtitle-text",children:e.site_subtitle||"Joyer\xeda Artesanal de Alto Standing"}),(0,zt.jsx)("span",{className:"subtitle-line"})]})}),(0,zt.jsx)(Bt,{direction:"up",delay:900,children:(0,zt.jsx)("p",{className:"hero-description",children:e.hero_description||e.artisan_story})}),(0,zt.jsx)(Bt,{direction:"up",delay:1200,children:(0,zt.jsx)("div",{className:"hero-cta",children:(0,zt.jsxs)("button",{className:"cta-button",onClick:()=>document.getElementById("collections").scrollIntoView({behavior:"smooth"}),children:["Explorar Colecciones",(0,zt.jsx)("span",{className:"cta-arrow",children:"\u2192"})]})})})]})]}),(0,zt.jsx)("section",{id:"collections",className:"collections-section",children:(0,zt.jsxs)("div",{className:"section-container",children:[(0,zt.jsx)(Bt,{direction:"up",delay:200,children:(0,zt.jsxs)("div",{className:"section-header",children:[(0,zt.jsx)("h2",{className:"section-title",children:e.collections_title||"Nuestras Colecciones"}),(0,zt.jsx)("div",{className:"section-subtitle",children:e.collections_subtitle||"Cada pieza cuenta una historia \xfanica"})]})}),(0,zt.jsx)("div",{className:"collections-showcase",children:n.map(((e,t)=>(0,zt.jsx)(Bt,{direction:"up",delay:200*(t+1),children:(0,zt.jsxs)("div",{className:"collection-card-elegant",onClick:()=>s(e),children:[(0,zt.jsxs)("div",{className:"collection-image-container",children:[(0,zt.jsx)("img",{src:e.image_base64,alt:e.name,className:"collection-image"}),(0,zt.jsx)("div",{className:"collection-overlay",children:(0,zt.jsxs)("div",{className:"overlay-content",children:[(0,zt.jsx)("span",{className:"view-collection",children:"Ver Colecci\xf3n"}),P&&(0,zt.jsx)("button",{onClick:t=>{t.stopPropagation(),D(e.image_base64,null,e.id)},className:"edit-image-btn",children:"Editar Imagen"})]})})]}),(0,zt.jsxs)("div",{className:"collection-content",children:[(0,zt.jsx)("h3",{className:"collection-name",children:e.name}),(0,zt.jsx)("p",{className:"collection-description",children:e.description}),(0,zt.jsxs)("div",{className:"collection-cta",children:[(0,zt.jsx)("span",{className:"cta-text",children:"Explorar"}),(0,zt.jsx)("span",{className:"cta-icon",children:"\u2192"})]})]})]})},e.id)))})]})}),i&&(0,zt.jsx)("div",{className:"modal-backdrop collection-modal-backdrop",children:(0,zt.jsxs)("div",{className:"collection-modal",children:[(0,zt.jsxs)("div",{className:"modal-header-elegant",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("h2",{className:"modal-title-elegant",children:i.name}),(0,zt.jsx)("p",{className:"modal-subtitle-elegant",children:i.description})]}),(0,zt.jsx)("button",{onClick:()=>s(null),className:"close-btn-elegant",children:"\xd7"})]}),(0,zt.jsx)("div",{className:"jewelry-showcase",children:(M=i.id,l.filter((e=>e.collection_id===M))).map(((e,t)=>(0,zt.jsxs)("div",{className:"jewelry-card-elegant",children:[(0,zt.jsxs)("div",{className:"jewelry-image-container",children:[(0,zt.jsx)("img",{src:e.image_base64,alt:e.name,className:"jewelry-image"}),(0,zt.jsx)("div",{className:"jewelry-shine-effect"}),P&&(0,zt.jsx)("button",{onClick:()=>D(e.image_base64,e.id),className:"edit-image-btn-small",children:"Editar"})]}),(0,zt.jsxs)("div",{className:"jewelry-content",children:[(0,zt.jsx)("h4",{className:"jewelry-name",children:e.name}),(0,zt.jsx)("p",{className:"jewelry-description",children:e.description})]})]},e.id)))})]})}),(0,zt.jsx)("footer",{className:"footer-elegant",children:(0,zt.jsxs)("div",{className:"footer-content",children:[(0,zt.jsxs)("div",{className:"footer-grid",children:[(0,zt.jsx)(Bt,{direction:"up",delay:200,children:(0,zt.jsxs)("div",{className:"footer-section",children:[(0,zt.jsx)("h3",{className:"footer-title",children:e.footer_title_1||"Sobre Nosotros"}),(0,zt.jsx)("p",{className:"footer-story",children:e.artisan_story})]})}),(0,zt.jsx)(Bt,{direction:"up",delay:400,children:(0,zt.jsxs)("div",{className:"footer-section",children:[(0,zt.jsx)("h3",{className:"footer-title",children:e.footer_title_2||"Contacto"}),(0,zt.jsxs)("div",{className:"contact-info",children:[(0,zt.jsx)("p",{className:"contact-item",children:e.artisan_contact}),(0,zt.jsx)("p",{className:"contact-item",children:e.artisan_phone}),(0,zt.jsx)("p",{className:"contact-item",children:e.artisan_address})]})]})}),(0,zt.jsx)(Bt,{direction:"up",delay:600,children:(0,zt.jsxs)("div",{className:"footer-section",children:[(0,zt.jsx)("h3",{className:"footer-title",children:e.footer_title_3||"S\xedguenos"}),(0,zt.jsx)("p",{className:"footer-follow",children:e.footer_text_3||"Conecta con nosotros en redes sociales"}),(0,zt.jsx)(qt,{config:e})]})})]}),(0,zt.jsxs)("div",{className:"footer-bottom",children:[(0,zt.jsx)("div",{className:"footer-divider"}),(0,zt.jsxs)("p",{className:"footer-copyright",children:["\xa9 2025 ",e.site_name,". ",e.footer_copyright||"Todos los derechos reservados."]})]})]})}),(()=>{const e=Math.floor(60*Math.random())+20,t={left:"20px",top:"".concat(e,"%"),transform:"translateY(-50%)"},n={right:"20px",top:"".concat(e,"%"),transform:"translateY(-50%)"},r="left"===C?t:n,a="bottom-4 right-4";return(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)("div",{className:"fixed ".concat(a," w-16 h-16 cursor-pointer z-40"),onClick:F,onTouchEnd:F,title:"",style:{background:"transparent",border:"none"}}),b&&(0,zt.jsx)("div",{className:"fixed z-50",style:r,children:(0,zt.jsx)("button",{onClick:()=>c(!0),className:"admin-access-btn animate-bounce",children:"Admin"})}),k>0&&k<5&&(0,zt.jsx)("div",{className:"fixed ".concat(a," z-45 pointer-events-none"),style:{transform:"translate(20px, -20px)"},children:(0,zt.jsx)("div",{className:"progress-indicator",children:[...Array(5)].map(((e,t)=>(0,zt.jsx)("div",{className:"progress-dot ".concat(t<k?"active":"")},t)))})}),x&&(0,zt.jsx)("div",{className:"fixed ".concat(a," z-45 pointer-events-none"),style:{transform:"translate(-30px, -30px)"},children:(0,zt.jsx)("div",{className:"timer-indicator",children:(0,zt.jsx)("div",{className:"timer-circle",children:(0,zt.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:(0,zt.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#d4af37",strokeWidth:"2",fill:"none",strokeDasharray:"62.83",strokeDashoffset:"0",className:"timer-circle-progress"})})})})})]})})(),(0,zt.jsx)(Mt,{isOpen:u,onClose:()=>c(!1)}),(0,zt.jsx)(It,{isOpen:d,onClose:()=>f(!1),siteConfig:e,onConfigUpdate:R,collections:n,onCollectionsUpdate:z,jewelryItems:l,onJewelryUpdate:L}),p&&(0,zt.jsx)(Ut,{imageBase64:null===h||void 0===h?void 0:h.base64,itemId:null===h||void 0===h?void 0:h.itemId,collectionId:null===h||void 0===h?void 0:h.collectionId,onSave:(e,t)=>{null!==h&&void 0!==h&&h.itemId?L():null!==h&&void 0!==h&&h.collectionId&&z(),m(!1),g(null)},onClose:()=>{m(!1),g(null)}}),P&&(0,zt.jsxs)("div",{className:"admin-float-button",children:[(0,zt.jsx)("button",{onClick:()=>f(!d),className:"float-admin-btn",children:d?"\xd7":"\u2699"}),d&&(0,zt.jsx)("div",{className:"admin-quick-menu",children:(0,zt.jsx)("button",{onClick:T,className:"logout-btn",children:"Cerrar Sesi\xf3n"})})]})]}):(0,zt.jsxs)("div",{className:"loading-screen",children:[(0,zt.jsx)("div",{className:"loading-spinner-elegant"}),(0,zt.jsx)("p",{children:"Cargando experiencia elegante..."})]});var M};const $t=function(){return(0,zt.jsx)(Ft,{children:(0,zt.jsx)(Vt,{})})};l.createRoot(document.getElementById("root")).render((0,zt.jsx)(a.StrictMode,{children:(0,zt.jsx)($t,{})}))})();
//# sourceMappingURL=main.337a6c75.js.map